<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CoinIMP Live Data & Graph</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    body { background:#111; color:#eee; font-family:Arial, sans-serif; text-align:center; }
    #valueBox { font-size:32px; margin:20px auto; color:#00ff99; }
    canvas { max-width:90%; margin: auto; }
</style>
</head>
<body>

<h1>CoinIMP Live Stats</h1>
<div id="valueBox">Chargement...</div>
<canvas id="liveChart"></canvas>

<script>
const PUBLIC_KEY  = "c909ccf8810603fd4771d73c7ea34f460ef48b2eb49dfefbc072127a27495c39";
const PRIVATE_KEY = "TA_CLE_PRIVEE_ICI"; // Remplace par ta clé privée

const API_ENDPOINT = "https://www.coinimp.com/api/v2/hashes";

let labels = [];
let dataPoints = [];

const ctx = document.getElementById("liveChart").getContext("2d");
const chart = new Chart(ctx, {
    type: "line",
    data: {
        labels: labels,
        datasets: [{
            label: "Hash total",
            data: dataPoints,
            borderColor: "#00ff99",
            fill: false,
            tension: 0.3
        }]
    },
    options: {
        scales: { y: { beginAtZero: true } }
    }
});

async function fetchData() {
    try {
        const res = await fetch(API_ENDPOINT, {
            headers: {
                "X-API-ID": PUBLIC_KEY,
                "X-API-KEY": PRIVATE_KEY
            }
        });
        const json = await res.json();
        if (!json.status || json.status !== "success") {
            console.error("Erreur API", json);
            return;
        }

        // Donnée retournée (hashes)
        const value = Number(json.message.data || 0);

        document.getElementById("valueBox").textContent = value.toLocaleString();

        const now = new Date().toLocaleTimeString();
        labels.push(now);
        dataPoints.push(value);

        if (labels.length > 20) {
            labels.shift();
            dataPoints.shift();
        }

        chart.update();
    } catch (err) {
        console.error(err);
    }
}

fetchData();
setInterval(fetchData, 5000);

</script>

</body>
</html>

</html>
</html>


